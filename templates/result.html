<!DOCTYPE html>
<html>
<head>
    <title>CognitoIAS - Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="background: #f8f9fa; padding: 40px;">

<div class="container text-center mb-5">
    <h1 class="display-4 fw-bold text-primary">Aapka Scorecard</h1>
    <div class="card d-inline-block p-4 mt-3 shadow" style="min-width: 300px;">
        <h2 class="m-0 text-success">{{ score }} / {{ total }}</h2>
        <p class="text-muted mb-0">Sahi Jawab</p>
    </div>
    <div class="mt-4">
        <a href="/" class="btn btn-primary">Home Par Jayein</a>
        <a href="/test" class="btn btn-outline-secondary">Dobara Test Dein</a>
    </div>
</div>

<div class="container">
    <h3 class="mb-4">Detailed Analysis:</h3>
    {% for r in results %}
    <div class="card mb-3 border-0 shadow-sm">
        <div class="card-body">
            <h5 class="fw-bold">Q{{ loop.index }}. {{ r.question.q_en | safe }}</h5>
            <p class="text-muted">{{ r.question.q_hi | safe }}</p>
            
            <div class="p-2 rounded {% if r.is_correct %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                Aapka Jawab: {{ r.user_ans if r.user_ans else "Nahi Diya" }} 
                {% if not r.is_correct %}(Sahi Jawab: {{ r.correct_ans }}){% endif %}
            </div>

            <div class="mt-3 p-3 bg-light border-start border-primary border-4">
                <strong>Explanation:</strong><br>
                {{ r.question.exp | safe }}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<div class="mt-3 p-3 bg-light border-start border-primary border-4">
    <strong>Original Explanation:</strong><br>
    {{ r.question.exp | safe }}
    
    <hr>
    <button class="btn btn-sm btn-info" onclick="getAIDeepExplanation('{{ r.question.id }}')">
        âœ¨ AI Se Deeply Samjhein (Beta)
    </button>
    <div id="ai-deep-{{ r.question.id }}" class="mt-3 text-secondary small" style="display:none; background: #fdfdfd; padding: 10px; border: 1px dashed #17a2b8;">
        </div>
</div>
</body>
</html>
