<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognito IAS - Master Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://cdn.ckeditor.com/4.19.1/standard/ckeditor.js"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; margin: 0; display: flex; }
        .sidebar { width: 250px; background: #2c3e50; height: 100vh; position: fixed; color: white; padding: 20px; }
        .main-content { margin-left: 250px; padding: 40px; width: 100%; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 30px; border-top: 5px solid #3498db; }
        h2 { color: #2c3e50; margin-bottom: 20px; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { background: #3498db; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        .btn-green { background: #27ae60; }
        .btn-orange { background: #e67e22; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>Cognito Admin</h2>
    <p><i class="fas fa-user-plus"></i> Student Manager</p>
    <p><i class="fas fa-file-alt"></i> Material Editor</p>
    <p><i class="fas fa-question-circle"></i> Question Bank</p>
    <hr>
    <a href="/" style="color: white; text-decoration: none;"><i class="fas fa-eye"></i> View Site</a>
</div>

<div class="main-content">
    <h1>Master Dashboard</h1>

    <div class="card" style="border-top-color: #27ae60;">
        <h2><i class="fas fa-user-plus"></i> Naya Student Add Karein</h2>
        <form method="POST">
            <div class="form-group">
                <label>Student ID (e.g. COGNITO001)</label>
                <input type="text" name="new_student_id" required>
            </div>
            <div class="form-group">
                <label>Set Password</label>
                <input type="password" name="new_pwd" required>
            </div>
            <button type="submit" class="btn btn-green">Add Student Now</button>
        </form>
    </div>

    <div class="card">
        <h2><i class="fas fa-pen-nib"></i> Study Material Publish Karein</h2>
        <form method="POST">
            <div class="form-group">
                <label>Material Title</label>
                <input type="text" name="post_title" required>
            </div>
            <div class="form-group">
                <label>Sub-Category</label>
                <select name="sub_id">
                    {% for sub in subcategories %}
                    <option value="{{ sub.id }}">{{ sub.parent_category.name }} -> {{ sub.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label>Content</label>
                <textarea name="post_content" id="editor_fixed"></textarea>
            </div>
            <button type="submit" class="btn">Publish Notes</button>
        </form>
    </div>

    <div class="card" style="border-top-color: #e67e22;">
        <h2><i class="fas fa-plus-square"></i> Manual Question Daalein</h2>
        <form method="POST">
            <input type="hidden" name="form_type" value="manual_question">
            <div class="form-group">
                <label>Select Test Topic</label>
                <input type="text" name="q_topic" placeholder="e.g. Modern History Test 1">
            </div>
            <div class="form-group">
                <label>Question Text</label>
                <textarea name="q_text" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>Options (Alag-Alag likhein)</label>
                <input type="text" name="opt_a" placeholder="Option A" style="margin-bottom:5px;">
                <input type="text" name="opt_b" placeholder="Option B" style="margin-bottom:5px;">
                <input type="text" name="opt_c" placeholder="Option C" style="margin-bottom:5px;">
                <input type="text" name="opt_d" placeholder="Option D">
            </div>
            <div class="form-group">
                <label>Correct Answer (A, B, C, ya D)</label>
                <input type="text" name="q_ans" maxlength="1">
            </div>
            <button type="submit" class="btn btn-orange">Save Question to Bank</button>
        </form>
    </div>
</div>

<script>
    // Safe initialization for CKEditor
    window.onload = function() {
        if (typeof CKEDITOR !== 'undefined') {
            CKEDITOR.replace('editor_fixed', {
                height: 300,
                removePlugins: 'easyimage,cloudservices',
            });
        }
    };
</script>
</body>
</html>
